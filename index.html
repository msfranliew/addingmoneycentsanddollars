<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Adding Money Practice</title>

<style>
  body {
    font-family: system-ui, -apple-system, Arial, sans-serif;
    max-width: 900px;
    margin: 30px auto;
    padding: 20px;
  }
  .card {
    border: 1px solid #ddd;
    border-radius: 16px;
    padding: 20px;
    margin-top: 20px;
  }
  .big {
    font-size: 28px;
    font-weight: 700;
    margin-bottom: 18px;
  }
  .step { margin-top: 14px; }
  input {
    padding: 8px;
    font-size: 16px;
    width: 110px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }
  button {
    padding: 10px 16px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    margin-top: 14px;
    margin-right: 8px;
  }
  .primary { background: #4CAF50; color: white; }
  .secondary { background: #2196F3; color: white; }
  .feedback {
    margin-top: 14px;
    font-weight: 700;
    font-size: 18px;
    line-height: 1.3;
  }
  .small {
    font-size: 14px;
    font-weight: 600;
    opacity: 0.85;
    margin-top: 8px;
  }
  .answerBox {
    margin-top: 10px;
    padding: 12px;
    border-radius: 12px;
    border: 1px dashed #999;
    display: none;
  }
</style>
</head>

<body>
<h2>üí∞ Add the Money ‚Äì Step by Step (No Carrying)</h2>

<div class="card">
  <div class="big" id="question"></div>

  <div class="step">
    <strong>Step 1: Add the dollars.</strong><br><br>
    $<input id="dollarsAnswer" type="number" inputmode="numeric" />
  </div>

  <div class="step">
    <strong>Step 2: Add the cents.</strong><br><br>
    <input id="centsAnswer" type="number" inputmode="numeric" /> ¬¢
    <div class="small" id="noCarryNote">Tip: For these questions, cents will always stay below 100¬¢.</div>
  </div>

  <div class="step">
    <strong>Step 3: Add the dollars and cents.</strong><br><br>
    $<input id="finalAnswer" type="text" placeholder="e.g. 46.45" inputmode="decimal" />
  </div>

  <button class="primary" onclick="checkAnswer()">Check Answer</button>
  <button class="secondary" onclick="generateQuestion()">New Question</button>

  <div class="feedback" id="feedback"></div>

  <div class="answerBox" id="answerBox">
    <div><strong>‚úÖ Correct answers:</strong></div>
    <div id="answerDetails"></div>
  </div>
</div>

<script>
  let num1, num2;
  let dollar1, dollar2, cent1, cent2;
  let correctDollarTotal;
  let correctCentTotal;
  let correctFinal;
  let attempts = 0; // reset every new question

  function pad2(n) {
    return String(n).padStart(2, "0");
  }

  // Generate cents so that cent1 + cent2 is ALWAYS < 100 (no carrying).
  function generateNoCarryCentsPair() {
    // Pick cent1 from 0..99
    const c1 = Math.floor(Math.random() * 100);
    // Then pick cent2 from 0..(99 - c1) so sum stays <= 99
    const c2 = Math.floor(Math.random() * (100 - c1));
    return [c1, c2];
  }

  function generateQuestion() {
    attempts = 0;
    hideAnswerBox();

    // Dollars: 10 to 99 (you can change range)
    dollar1 = Math.floor(Math.random() * 90) + 10;
    dollar2 = Math.floor(Math.random() * 90) + 10;

    // Cents: no carry pair
    [cent1, cent2] = generateNoCarryCentsPair();

    num1 = dollar1 + (cent1 / 100);
    num2 = dollar2 + (cent2 / 100);

    correctDollarTotal = dollar1 + dollar2;
    correctCentTotal = cent1 + cent2;  // guaranteed < 100

    correctFinal = (correctDollarTotal + correctCentTotal / 100).toFixed(2);

    document.getElementById("question").innerText =
      "$" + num1.toFixed(2) + " + $" + num2.toFixed(2);

    document.getElementById("dollarsAnswer").value = "";
    document.getElementById("centsAnswer").value = "";
    document.getElementById("finalAnswer").value = "";
    document.getElementById("feedback").innerText = "";
  }

  function showAnswerBox() {
    const answerBox = document.getElementById("answerBox");
    const details = document.getElementById("answerDetails");

    details.innerHTML = `
      Step 1 (dollars): $${dollar1} + $${dollar2} = <strong>$${correctDollarTotal}</strong><br>
      Step 2 (cents): ${cent1}¬¢ + ${cent2}¬¢ = <strong>${correctCentTotal}¬¢</strong><br>
      Step 3 (total): $${correctDollarTotal} + ${correctCentTotal}¬¢ = <strong>$${correctFinal}</strong>
    `;
    answerBox.style.display = "block";
  }

  function hideAnswerBox() {
    document.getElementById("answerBox").style.display = "none";
    document.getElementById("answerDetails").innerHTML = "";
  }

  function checkAnswer() {
    const dollarInputRaw = document.getElementById("dollarsAnswer").value;
    const centInputRaw = document.getElementById("centsAnswer").value;
    const finalInputRaw = document.getElementById("finalAnswer").value;

    const dollarInput = parseInt(dollarInputRaw, 10);
    const centInput = parseInt(centInputRaw, 10);

    // Normalise final input: allow "46.4" -> "46.40"
    let finalOk = false;
    if (finalInputRaw !== "" && !isNaN(Number(finalInputRaw))) {
      finalOk = Number(finalInputRaw).toFixed(2) === correctFinal;
    }

    const dollarsOk = !isNaN(dollarInput) && dollarInput === correctDollarTotal;
    const centsOk = !isNaN(centInput) && centInput === correctCentTotal;

    if (dollarsOk && centsOk && finalOk) {
      document.getElementById("feedback").innerText = "‚úÖ Excellent! Well done!";
      hideAnswerBox();
      attempts = 0; // optional reset after success
      return;
    }

    attempts += 1;

    if (attempts >= 2) {
      document.getElementById("feedback").innerText =
        "‚ùå Not quite. Here are the correct answers‚Äîcheck each step carefully.";
      showAnswerBox();
    } else {
      // Give targeted feedback on the first wrong attempt
      let msg = "‚ùå Not quite. Try again.\n";
      if (!dollarsOk) msg += "‚Ä¢ Check Step 1 (dollars).\n";
      if (!centsOk) msg += "‚Ä¢ Check Step 2 (cents).\n";
      if (dollarsOk && centsOk && !finalOk) msg += "‚Ä¢ Step 3: Combine dollars + cents correctly.\n";
      msg += "You have 1 more try.";
      document.getElementById("feedback").innerText = msg;
      hideAnswerBox();
    }
  }

  generateQuestion();
</script>
</body>
</html>
